# 人事分析ダッシュボード ユーザーガイド

## 目次

1. [はじめに](#はじめに)
2. [インストールと起動方法](#インストールと起動方法)
3. [ダッシュボードの基本操作](#ダッシュボードの基本操作)
4. [画面別機能詳細](#画面別機能詳細)
   - [ホーム画面](#ホーム画面)
   - [離職分析](#離職分析)
   - [人材獲得分析](#人材獲得分析)
   - [人材育成・パフォーマンス分析](#人材育成パフォーマンス分析)
   - [給与・報酬分析](#給与報酬分析)
   - [従業員エンゲージメント](#従業員エンゲージメント)
   - [労働生産性/ワークスタイル分析](#労働生産性ワークスタイル分析)
   - [予測分析・シミュレーション](#予測分析シミュレーション)
5. [高度な分析機能](#高度な分析機能)
6. [データの更新方法](#データの更新方法)
7. [よくある質問](#よくある質問)
8. [トラブルシューティング](#トラブルシューティング)

## はじめに

人事分析ダッシュボードは、企業の人事データを可視化・分析し、データに基づく戦略的な人事意思決定を支援するためのツールです。IBMのHRアナリティクスデータセットを活用し、従業員の離職予測、給与分析、人員計画など、さまざまな人事課題に対する洞察を提供します。

本システムの主な特徴：
- 直観的なインターフェースによる人事データの可視化
- 機械学習モデルを活用した離職予測と給与予測
- インタラクティブなシミュレーション機能
- 部門別・職種別の詳細分析
- データに基づく意思決定支援

## インストールと起動方法

### 必要条件
- Python 3.8以上
- pip（Pythonパッケージ管理ツール）

### インストール手順

1. リポジトリをクローンまたはダウンロードします。
```bash
git clone https://github.com/yourusername/hr-analytics-dashboard.git
cd hr-analytics-dashboard
```

2. 仮想環境を作成して有効化します。
```bash
# Windowsの場合
python -m venv venv
venv\Scripts\activate

# macOS/Linuxの場合
python3 -m venv venv
source venv/bin/activate
```

3. 必要なパッケージをインストールします。
```bash
pip install -r requirements.txt
```

### 起動方法

1. 仮想環境が有効化されていることを確認します。有効化されていない場合は、以下のコマンドで有効化します。
```bash
# Windowsの場合
venv\Scripts\activate

# macOS/Linuxの場合
source venv/bin/activate
```

2. コマンドラインから以下を実行します。
```bash
streamlit run src/app.py
```

3. ブラウザが自動的に開き、アプリケーションが表示されます。ブラウザが自動的に開かない場合は、表示されるURLをブラウザに貼り付けてアクセスしてください。

### 仮想環境の終了

アプリケーションの使用を終了したら、以下のコマンドで仮想環境を終了できます。
```bash
deactivate
```

## ダッシュボードの基本操作

### ナビゲーション
左側のサイドバーにあるメニューから、閲覧したい分析ページを選択できます。
各ページは特定の人事テーマ（離職、給与、パフォーマンスなど）に焦点を当てています。

### フィルタリング
各ページにはフィルタリングオプションがあり、特定の部門、職種、勤続年数などでデータを絞り込むことができます。フィルタは個別のページ内で設定し、そのページの分析にのみ適用されます。

### データ可視化
グラフやチャートはインタラクティブです：
- グラフ上にマウスを置くと、詳細データが表示されます
- 多くのグラフでは、凡例をクリックすることで特定のデータを表示/非表示にできます
- 右上のツールバーを使用して、グラフをダウンロードしたり、全画面表示にしたりできます

### タブの切り替え
多くのページでは、分析内容がタブに整理されています。タブをクリックすることで、異なる分析視点に切り替えることができます。

## 画面別機能詳細

### ホーム画面

ホーム画面は人事データの概要を提供し、主要な指標を一目で確認できます。

**主な機能：**
- 従業員データの基本統計（総従業員数、平均年齢、平均勤続年数など）
- 離職率の概要
- 部門別従業員構成
- データセットのサンプルプレビュー

**使い方：**
1. 左サイドバーから「🏠 ホーム・人材分析概要」を選択します
2. 画面上部のカードには主要な人事指標が表示されます
3. スクロールダウンすると、より詳細なデータビューが表示されます

### 離職分析

離職分析ページでは、従業員の離職に関する詳細な分析と予測モデルを提供します。

**主な機能：**
- 離職率の全体概要と部門別分析
- 離職要因分析（年齢、満足度、勤続年数などの要因別）
- 離職パターン分析（勤続年数帯別の離職率など）
- 機械学習モデルによる離職予測と特徴量重要度の分析

**使い方：**
1. 左サイドバーから「🚪 離職分析」を選択します
2. 上部の概要セクションで全体の離職率を確認します
3. タブを使用して異なる分析視点を切り替えます：
   - 「📊 離職要因分析」：さまざまな要因と離職の関係を分析
   - 「🔍 離職パターン」：離職の時間的・属性的パターンを分析
   - 「🤖 離職予測モデル」：機械学習モデルによる予測と分析

4. 「離職要因分析」タブでは：
   - 分析したい要因をマルチセレクトボックスから選択します
   - 選択した要因と離職率の関係がグラフで表示されます
   - 数値変数間の相関分析も確認できます

5. 「離職予測モデル」タブでは：
   - ドロップダウンメニューからモデルタイプを選択します
   - 「離職予測モデルを構築する」チェックボックスをオンにするとモデルが構築されます
   - モデルの精度、混同行列、特徴量重要度などが表示されます
   - リスクスコアのしきい値を調整して、高リスク従業員の数を見積もれます

### 人材獲得分析

※現在開発中の機能です。将来的に以下の機能が提供される予定です：
- 採用チャネル効果分析
- 採用コスト分析
- 採用から定着までの期間分析
- 採用基準と業績の関係分析

### 人材育成・パフォーマンス分析

※現在開発中の機能です。将来的に以下の機能が提供される予定です：
- 従業員パフォーマンス評価の分布と傾向
- トレーニングの効果分析
- パフォーマンスと他の要因（満足度、給与など）の関係
- 高業績者の特性分析

### 給与・報酬分析

※現在開発中の機能です。将来的に以下の機能が提供される予定です：
- 給与分布と統計
- 役職・職種別の給与分析
- 給与と業績・満足度の関係
- 給与の公平性分析

### 従業員エンゲージメント

※現在開発中の機能です。将来的に以下の機能が提供される予定です：
- 満足度要因の分析
- エンゲージメントと業績・離職の関係
- 部門別・マネージャー別のエンゲージメント比較
- エンゲージメント向上施策の効果予測

### 労働生産性/ワークスタイル分析

※現在開発中の機能です。将来的に以下の機能が提供される予定です：
- 労働時間と生産性の関係
- リモートワークと生産性の分析
- ワークライフバランスと業績の関係
- 残業パターンの分析

### 予測分析・シミュレーション

予測分析・シミュレーションページでは、機械学習モデルを活用して将来予測と「もし～だったら？」シナリオのシミュレーションを行います。

**主な機能：**
- 離職予測モデル（複数のアルゴリズムから選択可能）
- 給与予測モデル
- インタラクティブな離職リスク予測
- 給与シミュレーター
- 人員計画シミュレーション

**使い方：**
1. 左サイドバーから「🔮 予測分析・シミュレーション」を選択します
2. タブを使用して異なるシミュレーション機能を切り替えます：
   - 「🔮 離職予測」：離職予測モデルとインタラクティブシミュレーション
   - 「💰 給与予測」：給与予測モデルと給与シミュレーター
   - 「👥 人員計画シミュレーション」：将来の人員需要と採用計画のシミュレーション

3. 「離職予測」タブでは：
   - ドロップダウンメニューから予測モデルを選択します
   - モデルの性能指標（精度、AUCなど）と特徴量重要度を確認できます
   - 下部の「インタラクティブな離職リスク予測」セクションでは：
     - スライダーやドロップダウンを使用して従業員の特性を設定します
     - リアルタイムで離職確率が計算されます
     - 「もし～だったら？」シミュレーションで施策の効果を予測できます

4. 「給与予測」タブでは：
   - ドロップダウンメニューから予測モデルを選択します
   - モデルの性能指標（R²、平均絶対誤差など）を確認できます
   - 下部の「給与シミュレーター」セクションでは：
     - 従業員の特性を入力して、予測される給与を確認できます
     - 同じ職種・役職の平均給与との比較が表示されます
     - 「昇給シミュレーション」で昇進や部門異動による給与変化を予測できます

5. 「人員計画シミュレーション」タブでは：
   - ドロップダウンメニューから部門を選択します
   - 現在の部門構成（役職レベル別、職種別）が表示されます
   - 離職率予測に基づく将来の人員需要が計算されます
   - 下部のシミュレーションセクションでは：
     - 計画期間、成長率、離職率の調整などのパラメータを設定します
     - 年次別・職種別の採用必要数が計算されます
     - 採用コストの試算も確認できます

## 高度な分析機能

### モデル比較

予測分析・シミュレーションページでは、複数の機械学習モデルを比較できます。

**使い方：**
1. 「離職予測」または「給与予測」タブで、異なるモデルを選択します
2. 各モデルの性能指標を比較します
3. 特徴量重要度の違いを分析して、モデルごとの予測ロジックの違いを理解します

### カスタムシミュレーション

「もし～だったら？」シミュレーション機能を使用して、人事施策の効果を予測できます。

**使い方：**
1. 離職予測や給与予測のインタラクティブセクションで基本パラメータを設定します
2. 「シミュレーションしたい変更を選択してください」から施策を選択します
3. 選択した施策による効果（離職確率の変化や給与の変化）が表示されます
4. 複数の施策を組み合わせて、最適な施策の組み合わせを探索できます

## データの更新方法

現在のシステムはIBMのHRアナリティクスデータセットを使用していますが、独自の人事データを使用することも可能です。

### データ形式要件

- CSVファイル形式
- IBMデータセットと同じ列名を使用するか、データローダーを調整する必要があります
- 最低限必要な列：従業員ID、離職状況（Attrition）、部門、職種、年齢、給与、勤続年数

### データ更新手順

1. 新しいCSVファイルを `data/raw/` ディレクトリに配置します
2. `src/data/loader.py` ファイルを編集して、新しいファイルパスを指定します
3. 必要に応じて、データの前処理ロジックを `src/data/cleaner.py` で調整します
4. アプリケーションを再起動して、新しいデータを読み込みます

### 定期データ更新の自動化

定期的なデータ更新を自動化するには：
1. データ更新スクリプトを作成します
2. crontabやWindowsタスクスケジューラを使用して定期実行を設定します
3. 更新スクリプトが実行された後、アプリケーションを再起動するロジックを追加します

## よくある質問

### Q: シミュレーション結果をエクスポートできますか？
A: はい、多くのグラフには右上にダウンロードアイコンがあり、画像としてエクスポートできます。また、表形式のデータはCSVとしてダウンロード可能です。

### Q: 予測モデルの精度はどのくらいですか？
A: モデルの精度は使用するアルゴリズムとデータによって異なります。各モデルページには精度指標（離職予測ではAccuracyとAUC、給与予測ではR²と平均絶対誤差）が表示されます。一般的に、ランダムフォレストやXGBoostモデルが高い精度を示しています。

### Q: 新しい従業員データを追加するにはどうすればよいですか？
A: 「データの更新方法」セクションを参照してください。基本的には既存のCSVファイルに新しいレコードを追加し、アプリケーションを再起動します。

### Q: 他のデータソースからデータをインポートできますか？
A: はい、可能です。ただし、データローダーとクリーナーの調整が必要になります。SQLデータベースやAPIからのインポートには、`src/data/loader.py`のカスタマイズが必要です。

### Q: モデルの予測結果をどのように解釈すればよいですか？
A: モデルの予測結果は、特徴量重要度グラフと併せて解釈すると有益です。例えば、離職予測でリスクが高い場合は、特徴量重要度が高い要因（残業、満足度など）に注目することで、具体的な対策を検討できます。

## トラブルシューティング

### アプリケーションが起動しない

**考えられる原因と解決策：**
1. Pythonバージョンの不一致：Python 3.8以上を使用していることを確認してください
2. 依存パッケージの不足：`pip install -r requirements.txt`を再実行してください
3. ポートの競合：既定のポート（通常は8501）が使用中の場合は、`streamlit run src/app.py --server.port 8502`のように別のポートを指定してください

### グラフが表示されない

**考えられる原因と解決策：**
1. データの欠損：データファイルが正しくロードされているか確認してください
2. ブラウザの互換性問題：Chrome、Firefox、Edgeなどの最新ブラウザを使用してください
3. キャッシュの問題：ブラウザのキャッシュをクリアするか、シークレットモードで試してください

### 予測モデルのエラー

**考えられる原因と解決策：**
1. 特徴量の不一致：カスタムデータを使用している場合、必要な特徴量がすべて含まれているか確認してください
2. データ型の問題：数値データが文字列として読み込まれていないか確認してください
3. メモリ不足：大規模データセットの場合、より少ない特徴量を選択するか、サンプリングを検討してください

### パフォーマンスの問題

**考えられる原因と解決策：**
1. データサイズが大きい：大規模データセットでは、フィルタリングやサンプリングを活用してください
2. 複雑なモデル：より簡易なモデル（ランダムフォレストよりもロジスティック回帰など）を選択してください
3. ハードウェアの制限：より多くのRAMやCPUコアを持つ環境での実行を検討してください

---

このユーザーガイドは随時更新されます。最新の機能や使用方法については、ドキュメントを定期的に確認してください。ご質問やフィードバックがある場合は、開発チームまでお問い合わせください。